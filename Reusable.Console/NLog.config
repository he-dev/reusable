<?xml version="1.0" encoding="utf-8" ?>
<nlog
  xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  internalLogFile="C:\\temp\\NLog.Loggex.txt"
  internalLogLevel="Error">

  <!-- *** Do not modify this file. It is autogenerated (11.05.2017 15:48:41 (UTC)) *** -->

  <!-- sub-templates -->

  <variable name="environmentNotAvailable" value="N/A" />
  <variable name="environmentLayout" value="${whenEmpty:whenEmpty=${environmentNotAvailable}:inner=${event-context:item=Environment}}" />

  <variable name="callsiteLayout" value="${callsite:className=true:fileName=true:methodName:true}" />
  <variable name="exceptionLayout" value="${exception:format=tostring:separator= | :innerFormat=tostring,message:maxInnerExceptionLevel=7:innerExceptionSeparator= | }" />
  <variable name="stackTraceLayout" value="${stacktrace:format=raw:topFrames=7:separator= » }" />

  <!-- full templates -->

  <variable name="debuggerLayout" value="DEBUG » ${level:uppercase=true} | ${message}${onexception:${newline}${exceptionLayout}}" />

  <targets>

    <target xsi:type="Debugger" name="debugger" layout="${debuggerLayout}" />


    <target xsi:type="Database" name="Loggex_TestLog" dbProvider="System.Data.SqlClient" connectionString="Data Source=(local);Initial Catalog=TEST_LOG;Integrated Security=True">
      <commandText>
        INSERT INTO [tests].[Loggex_TestLog] (
        [Environment],
        [Timestamp],
        [LogLevel],
        [Logger],
        [ThreadId],
        [ElapsedSeconds],
        [Message],
        [Exception]
        ) VALUES (
        @Environment,
        @Timestamp,
        @LogLevel,
        @Logger,
        @ThreadId,
        NULLIF(@ElapsedSeconds, ''),
        NULLIF(@Message, ''),
        NULLIF(@Exception, '')
        )
      </commandText>

      <!-- Default columns for each log. -->
      <parameter name="@Timestamp" layout="${longdate:universalTime=true}" />
      <parameter name="@Environment" layout="${environmentLayout}" />
      <parameter name="@LogLevel" layout="${level:uppercase=true}" />
      <parameter name="@Logger" layout="${logger}" />
      <parameter name="@ThreadId" layout="${ThreadId}" />
      <parameter name="@Message" layout="${Message}" />
      <parameter name="@Exception" layout="${onexception:${exceptionLayout}}" />

      <!-- Custom columns. -->
      <parameter name="@ElapsedSeconds" layout="${invariant-properties:item=ElapsedSeconds}" />
    </target>

    <target xsi:type="Console" name="Console" layout="${debuggerLayout}" encoding="utf-8" />

  </targets>

  <rules>

    <!-- Log everything to debugger -->
    <logger name="*" minlevel="Trace" writeTo="debugger" enabled="true" final="false" />

    <logger name="*" minlevel="Trace" writeTo="Console" enabled="true" />


    <!-- Use the MainLog if no other log matches. -->
    <logger name="*" appendTo="Loggex_TestLog" minlevel="Debug" enabled="true" final="true" />

  </rules>
</nlog>

