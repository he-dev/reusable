<?xml version="1.0" encoding="utf-8" ?>
<nlog
  xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  internalLogFile="c:\temp\Reusable.apps.Console.log"
  internalLogLevel="Error">

  <!-- *** This file was autogenerated on 17/11/2018 10:42:32 (UTC) *** -->
  <!-- *** Any modifications can be lost. *** -->

  <!-- sub-templates -->

  <variable name="environmentNotAvailable" value="N/A" />
  <variable name="environmentLayout" value="${whenEmpty:whenEmpty=${environmentNotAvailable}:inner=${event-context:item=Environment}}" />

  <variable name="callsiteLayout" value="${callsite:className=true:fileName=true:methodName:true}" />
  <variable name="exceptionLayout" value="${exception:format=tostring:separator= | :innerFormat=tostring,message:maxInnerExceptionLevel=7:innerExceptionSeparator= | }" />
  <variable name="stackTraceLayout" value="${stacktrace:format=raw:topFrames=7:separator= » }" />

  <!-- full templates -->  

  <variable name="debuggerLayout" value="OmniLog » ${level:uppercase=true} | ${message}${onexception:${newline}${exceptionLayout}}" />

    <targets>    

    <target xsi:type="Debugger" name="debugger" layout="${debuggerLayout}" />

	
		<!-- <target xsi:type="Database" name="Test_SemLog3" dbProvider="System.Data.SqlClient" connectionString="data source=localhost;initial catalog=TestDb;User Id=SA;Password=ABC123!!!;"> -->
        <target 
            xsi:type="Database" 
            name="Test_SemLog3"
            keepConnection="false"
            useTransactions="false"
            dbProvider="Microsoft.Data.Sqlite.SqliteConnection, Microsoft.Data.Sqlite" 
            connectionString="Data Source=c:\\.stuff\\a\\temp\\reusable.sqlite;">
			<commandText>
				insert into log (
                    [timestamp],
                    [environment],
                    [product],
                    [logger],
                    [scope],
                    [layer],
                    [level],
                    [category],
                    [member],
                    [snapshot],
                    [elapsed],
                    [message],
                    [exception],
                    [caller_member_name],
                    [caller_line_number],
                    [caller_file_path]
				) VALUES (
                    @Timestamp,
                    @Environment,
                    @Product,
                    @Logger,
                    @Scope,
                    @Layer,
                    @Level,
                    @Category,
                    @Member,
                    @Snapshot,
                    @Elapsed,
                    @Message,
                    @Exception,
                    @CallerMemberName,
                    @CallerLineNumber,
                    @CallerFilePath
				)
			</commandText>
						
			<parameter name="@Timestamp" layout="${longdate:universalTime=true}" />
			<parameter name="@Environment" layout="${smart-properties:key=Environment:ignoreCase=true}" />
			<parameter name="@Product" layout="${smart-properties:key=Product:ignoreCase=true}" />
			<parameter name="@Logger" layout="${logger}" />
			<parameter name="@Scope" layout="${smart-properties:key=Scope:ignoreCase=true}" />
			<parameter name="@Layer" layout="${smart-properties:key=Layer:ignoreCase=true}" />
			<parameter name="@Level" layout="${level:lowercase=true}" />
			<parameter name="@Category" layout="${smart-properties:key=Category:ignoreCase=true}" />
			<parameter name="@Member" layout="${smart-properties:key=Member:ignoreCase=true}" />
			<parameter name="@Snapshot" layout="${smart-properties:key=Snapshot:ignoreCase=true}" />
			<parameter name="@Elapsed" layout="${smart-properties:key=Elapsed:ignoreCase=true}" />
			<parameter name="@Message" layout="${smart-properties:key=Message:ignoreCase=true}" />
			<parameter name="@Exception" layout="${onexception:${exceptionLayout}}" />
			<parameter name="@CallerMemberName" layout="${smart-properties:key=CallerMemberName:ignoreCase=true}" />
			<parameter name="@CallerLineNumber" layout="${smart-properties:key=CallerLineNumber:ignoreCase=true}" />
			<parameter name="@CallerFilePath" layout="${smart-properties:key=CallerFilePath:ignoreCase=true}" />
		</target>

  </targets>

  <rules>

    <!-- Log everything to debugger -->
    <logger name="*" minlevel="Trace" writeTo="debugger" enabled="true" final="false" />

    <logger name="Test_SemLog3" appendTo="Test_SemLog3" minlevel="Trace" enabled="true" final="true" />
   
    <!-- Use the fallbackLog if no other log matches. -->
    <logger name="*" appendTo="Test_SemLog3" minlevel="Trace" enabled="true" final="true" />

  </rules>
</nlog>

